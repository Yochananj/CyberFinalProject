title Log In API

participant Client
participant CommsManager
participant EncryptionService
participant DecryptionService
participant KeysService
participant LoginService
participant UsersDAO
participant UsersDB
participant KeysDAO
participant KeysDB


Client -> CommsManager: Encrypted Message
CommsManager -> DecryptionService: Decrypt Message
DecryptionService -->> CommsManager: Decrypted Message
CommsManager -> CommsManager: Parse message



CommsManager -> LoginService: Transfer User Details
LoginService -> UsersDAO: Check User Details
UsersDAO -> UsersDB: Get Info
UsersDB -->> UsersDAO: Return Info (?)
UsersDAO -->> LoginService: Return Info
LoginService -> LoginService: Authorize Login
LoginService -> KeysService: Transfer Authorized User Details
KeysService -> KeysDAO: Generate Login Token
KeysDAO -> KeysDB: Add Token to DB
KeysService -> EncryptionService: Encrypt Login Token
EncryptionService -> CommsManager: Transfer Login Token
CommsManager -> Client: Send Login Token
